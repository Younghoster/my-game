{"version":3,"sources":["game.js"],"names":["Global","require","cc","Class","extends","Component","properties","startBtn","default","type","Node","puaseBtn","coverBox","player","scoreText","Label","blockBox","blockPrefab","Prefab","propPrefab","initGame","active","onDrag","gameData","over","createBlockList","schedule","level","createProp","startGame","director","resume","pauseGame","pause","offDrag","gameEnd","console","log","setTimeout","loadScene","getScore","score","string","on","dragMove","off","event","locationv","getLocation","location","node","convertToNodeSpaceAR","minX","width","maxX","minY","height","maxY","x","y","setPosition","newProp","instantiate","_x","parseInt","Math","random","_y","addChild","blockObjGroup","blockPool","NodePool","initCount","i","block","put","createBlock","index","num","parentNode","needSpeed","spacing","_w","colorKey","xSpeed","size","get","getComponent","BoxCollider","offset","color","Color","colors","getChildByName","parent","dataxspeed","onLoad","game","pack","manager","getCollisionManager","enabled","window","wx","getSystemInfoSync","windowWidth","start","showShareMenu","withShareTicket","success","res","fail","err","onShareAppMessage","title","shareInfo","imageUrl","url"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\game","sourcesContent":["const Global = require(\"Global\")\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // 开始按钮\r\n        startBtn: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 暂停\r\n        puaseBtn: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 游戏开始遮罩层(这里我设成了一个全屏按钮，这样就不用初始化添加事件柄了)\r\n        coverBox: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 飞机\r\n        player: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 分数label\r\n        scoreText: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        // 方块的容器\r\n        blockBox: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 生成的方块资源\r\n        blockPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        // 道具包资源\r\n        propPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n    },\r\n\r\n    // Method:\r\n\r\n    initGame() {\r\n        this.coverBox.active = false;\r\n        // 添加触摸事件\r\n        this.onDrag();\r\n        Global.gameData.over = false;\r\n        // 方块定时生成\r\n        this.createBlockList(5);\r\n        this.schedule(() => {\r\n            if (Global.gameData.level >= 3) {\r\n                this.createBlockList(5, true);\r\n            } else {\r\n                this.createBlockList(5);\r\n            }\r\n        }, 6);\r\n        // 道具定时派出\r\n        // this.createProp()\r\n        this.schedule(() => {\r\n            this.createProp();\r\n        }, 18 / Global.gameData.level);\r\n    },\r\n    // 开始游戏\r\n    startGame() {\r\n        cc.director.resume();\r\n        this.puaseBtn.active = true;\r\n        this.startBtn.active = false;\r\n        this.onDrag();\r\n    },\r\n    // 暂停游戏\r\n    pauseGame() {\r\n        if (Global.gameData.over) return;\r\n        cc.director.pause();\r\n        this.startBtn.active = true;\r\n        this.puaseBtn.active = false;\r\n        this.offDrag();\r\n    },\r\n    // 游戏结束\r\n    gameEnd() {\r\n        console.log('游戏结束~');\r\n        cc.director.pause();\r\n        this.offDrag();\r\n        Global.gameData.over = true;\r\n        setTimeout(() => {\r\n            cc.director.loadScene('rank', () => {\r\n                console.log('重置游戏了~');\r\n                cc.director.resume();\r\n            });\r\n        }, 1000);\r\n    },\r\n    // 游戏得分\r\n    getScore() {\r\n        Global.gameData.score += 1;\r\n        this.scoreText.string = Global.gameData.score;\r\n    },\r\n    // 添加拖动监听\r\n    onDrag() {\r\n        this.player.on('touchmove', this.dragMove, this);\r\n    },\r\n    // 清除拖动监听\r\n    offDrag() {\r\n        this.player.off('touchmove', this.dragMove, this);\r\n    },\r\n    // 设置飞机拖拽\r\n    dragMove(event) {\r\n        if (Global.gameData.over) return;\r\n        let locationv = event.getLocation();\r\n        let location = this.node.convertToNodeSpaceAR(locationv);\r\n        // 飞机不移出屏幕\r\n        let minX = -this.node.width / 2 + this.player.width / 6,\r\n            maxX = -minX,\r\n            minY = -this.node.height / 2 + this.player.height / 6,\r\n            maxY = -minY;\r\n        if (location.x < minX) location.x = minX;\r\n        if (location.x > maxX) location.x = maxX;\r\n        if (location.y < minY) location.y = minY;\r\n        if (location.y > maxY) location.y = maxY;\r\n        this.player.setPosition(location);\r\n    },\r\n    // 创建道具包\r\n    createProp() {\r\n        let newProp = cc.instantiate(this.propPrefab);\r\n        let _x = parseInt((this.blockBox.width - newProp.width) * Math.random()) + 1 + newProp.width,\r\n            _y = this.blockBox.height + newProp.height;\r\n        newProp.setPosition(_x, _y);\r\n        this.blockBox.addChild(newProp);\r\n    },\r\n    // 方块对象池\r\n    blockObjGroup() {\r\n        Global.gameData.blockPool = new cc.NodePool();\r\n        let initCount = 50;\r\n        for (let i = 0; i < initCount; ++i) {\r\n            let block = cc.instantiate(this.blockPrefab);\r\n            Global.gameData.blockPool.put(block);\r\n        }\r\n    },\r\n    /**\r\n     * 创建方块（单个）\r\n     * num: 一列个数\r\n     * parentNode：父节点\r\n     * key：当前位置\r\n     * x：x坐标\r\n     * y：y坐标\r\n     * score：当个方块的分数\r\n     * needSpeed: 是否要左右偏移\r\n    */\r\n    createBlock(index, num = 4, parentNode, score = 1, needSpeed) {\r\n        let spacing = 10;\r\n        let block = null;\r\n        let _w = (this.node.width - (num + 1) * spacing) / num;\r\n        let _x = index * (_w + spacing) + spacing;\r\n        let _y = this.node.height + _w;\r\n        let colorKey = parseInt(score / 10) > 5 ? 5 : parseInt(score / 10);\r\n        let type = parseInt(2 * Math.random());\r\n        let xSpeed = 0;\r\n        if (needSpeed) xSpeed = type == 0 ? parseInt(5 * Math.random()) : parseInt(-5 * Math.random());\r\n        // 从对象池获取节点\r\n        if (Global.gameData.blockPool.size() > 0) {\r\n            block = Global.gameData.blockPool.get();\r\n        } else {\r\n            block = cc.instantiate(this.blockPrefab);\r\n        }\r\n        // 设置宽高\r\n        block.width = block.height = _w;\r\n        // 设置碰撞包围\r\n        block.getComponent(cc.BoxCollider).size.width = block.getComponent(cc.BoxCollider).size.height = _w;\r\n        block.getComponent(cc.BoxCollider).offset.x = _w / 2;\r\n        block.getComponent(cc.BoxCollider).offset.y = -_w / 2;\r\n        // 设置颜色\r\n        block.color = new cc.Color(Global.gameData.colors[colorKey]);\r\n        // 设置定位\r\n        block.setPosition(_x, _y);\r\n        // 子节点分数\r\n        block.getChildByName('boxtext').getComponent(cc.Label).string = score;\r\n        // 将生成的敌人加入节点树\r\n        block.parent = parentNode;\r\n        // 设置方块 X轴 速度\r\n        block.dataxspeed = xSpeed\r\n    },\r\n    // 生成一列方块\r\n    createBlockList(num, needSpeed) {\r\n        let _w = this.node.width / num;\r\n        for (let i = 0; i < num; i++) {\r\n            let random = parseInt(10 * Global.gameData.level * Math.random()) + 10 * Global.gameData.level * 1.2;\r\n            this.createBlock(i, num, this.blockBox, random, needSpeed)\r\n        }\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        // 储存游戏 & 重置全局数据\r\n        Global.game = this;\r\n        Global.gameData.over = true;\r\n        Global.gameData.score = 0;\r\n        Global.gameData.level = 1;\r\n        Global.gameData.pack = false;\r\n\r\n        // 开启碰撞系统\r\n        let manager = cc.director.getCollisionManager();\r\n        manager.enabled = true;\r\n        // 开启物理系统(不需要)\r\n        // cc.director.getPhysicsManager().enabled = true;\r\n        // 开启碰撞系统的调试线框绘制\r\n        // manager.enabledDebugDraw = true;\r\n        // manager.enabledDrawBoundingBox = true;\r\n\r\n        // 创建方块对象池\r\n        this.blockObjGroup();\r\n\r\n        if (window.wx) {\r\n            console.log('宽度：', this.node.width, wx.getSystemInfoSync().windowWidth);\r\n        }\r\n    },\r\n\r\n    start () {\r\n        if (window.wx) {\r\n            // 显示分享按钮\r\n            wx.showShareMenu({\r\n                withShareTicket: true,\r\n                success(res) {\r\n                    console.log('打开分享成功');\r\n                },\r\n                fail(err) {\r\n                    console.log('打开分享失败');\r\n                }\r\n            })\r\n\r\n            // 设置转发分内容\r\n            wx.onShareAppMessage(res => {\r\n                // console.log('监听分享内容', res);\r\n                return {\r\n                    title: Global.shareInfo.title,\r\n                    imageUrl: Global.shareInfo.url,\r\n                }\r\n            })\r\n        }\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}