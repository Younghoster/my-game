{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Game/assets\\Script\\Game\\Ball.js"],"names":["Global","require","colors","mountain","tree","floor","ground","cc","Class","extends","Component","properties","moveBox","default","type","Node","bgColor","audioFloor","AudioClip","audioDeath","audioBox","audioBoom","audioBoard","scoreLabel","Label","moneyLabel","moneyTip","explodeBoom","Prefab","explodeGold","moneyTipMove","num","userInfo","money","string","show","spawn","fadeIn","scaleTo","stop","hide","fadeOut","seq","sequence","easing","easeOut","node","runAction","viewScale","val","y","ss","game","wrap","scale","colorSwitch","transform","key","callFunc","color","hexToColor","bgMove","_w","width","sun","getChildByName","cloud","x","bg_speed","gameInfo","level","countToatal","minNumber","console","log","opacity","score_count","value","score","restData","bone","floorNum","startDash","getComponent","dragonBones","ArmatureDisplay","timeScale","collisionFloor","window","wx","vibrateShort","state","height","bounce","playAnimation","ParticleSystem","stopSystem","gameOver","audioEngine","play","collisionOrc","isBoard","explode","orcPool","put","total","creatOrc","scheduleOnce","collisionStorehouse","destroy","boom","instantiate","setPosition","parent","map","parseInt","Math","random","collisionBomb","nodeShock","collisionBoard","onCollisionEnter","other","self","name","onLoad","start","update","dt"],"mappings":"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","file":"Ball.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Game","sourcesContent":["const Global = require('Global');\r\nconst colors = [\r\n    {\r\n        mountain: '#7D2C1B',\r\n        tree: '#491D12',\r\n        floor: '#75280C',\r\n        ground: '#3D1805',\r\n    },{\r\n        mountain: '#81b68c',\r\n        tree: '#65977a',\r\n        floor: '#e5c282',\r\n        ground: '#2b5748',\r\n    }\r\n]\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // 风景移动容器\r\n        moveBox: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 背景容器（canvas大小）\r\n        bgColor: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 音效\r\n        audioFloor: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        audioDeath: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        audioBox: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        audioBoom: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        audioBoard: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        // 分数\r\n        scoreLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        // 金币\r\n        moneyLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        // 掉落金币提示\r\n        moneyTip: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        // 炸弹粒子\r\n        explodeBoom: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        // 金币粒子\r\n        explodeGold: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n    },\r\n    // 掉落金币提示动画\r\n    moneyTipMove(num) {\r\n        Global.userInfo.money += num;\r\n        this.moneyLabel.string = Global.userInfo.money;\r\n        this.moneyTip.string = '金币 +' + num;\r\n        let show = cc.spawn(cc.fadeIn(0.3), cc.scaleTo(0.3, 2, 2));\r\n        let stop = cc.scaleTo(0.5, 1, 1);\r\n        let hide = cc.spawn(cc.fadeOut(0.3), cc.scaleTo(0.3, 1, 1));\r\n        let seq = cc.sequence(show, stop, hide);\r\n        seq.easing(cc.easeOut(3.0));\r\n        this.moneyTip.node.runAction(seq);\r\n    },\r\n\r\n    // 视觉缩放\r\n    viewScale() {\r\n        let val = 500;  // 正常弹起高度\r\n        if (this.node.y < val) return;\r\n\r\n        // 第一种（性能更好）\r\n        // Global.game.wrap.scale = val / this.node.y;\r\n        \r\n        /**\r\n         * 第二种\r\n         * 75：球的半径\r\n         * 890：球弹起来的最大高度\r\n         */\r\n        let ss = 75 / (890 / this.node.y);\r\n        Global.game.wrap.scale = (val - ss) / this.node.y;\r\n    },\r\n\r\n    // 颜色过渡切换\r\n    colorSwitch(mountain, tree, floor, ground, num) {\r\n        function transform(node, key) {\r\n            let seq = cc.sequence(cc.fadeOut(0.3), cc.callFunc(() => {\r\n                node.color = cc.hexToColor(colors[num][key]);\r\n            }), cc.fadeIn(0.3));\r\n            node.runAction(seq);\r\n        }\r\n        transform(mountain, 'mountain');\r\n        transform(tree, 'tree');\r\n        transform(floor, 'floor');\r\n        transform(ground, 'ground'); \r\n    },\r\n\r\n    // 背景移动\r\n    bgMove() {\r\n        const _w = this.moveBox.width;\r\n        let sun = this.moveBox.getChildByName('sun'),\r\n            tree = this.moveBox.getChildByName('tree'),\r\n            mountain = this.moveBox.getChildByName('mountain'),\r\n            floor = this.moveBox.getChildByName('floor'),\r\n            ground = this.moveBox.getChildByName('ground'),\r\n            cloud = this.moveBox.getChildByName('cloud');\r\n        // 太阳 移动 \r\n        sun.x -= this.bg_speed / 8;\r\n        if (sun.x <= -sun.width) {\r\n            sun.x = _w;\r\n\r\n            // 难度增加\r\n            Global.gameInfo.level = Global.gameInfo.countToatal == Global.gameInfo.minNumber ? Global.gameInfo.level : Global.gameInfo.level + 1;\r\n            console.log('难度增加======>', Global.gameInfo.level);\r\n\r\n            // 判断切换背景颜色\r\n            if (sun.opacity == 255) {\r\n                this.colorSwitch(mountain, tree, floor, ground, 1);\r\n                // this.bgColor.getChildByName('color-1').runAction(cc.fadeOut(0.3));\r\n                this.bgColor.getChildByName('color-2').runAction(cc.fadeIn(0.3));\r\n                sun.runAction(cc.fadeOut(0.3));\r\n                cloud.runAction(cc.fadeIn(0.3));\r\n            } else {\r\n                this.colorSwitch(mountain, tree, floor, ground, 0);\r\n                this.bgColor.getChildByName('color-2').runAction(cc.fadeOut(0.3));\r\n                // this.bgColor.getChildByName('color-1').runAction(cc.fadeIn(0.3));\r\n                sun.runAction(cc.fadeIn(0.3));\r\n                cloud.runAction(cc.fadeOut(0.3));\r\n            }\r\n        }\r\n\r\n        // 分数\r\n        this.score_count += (this.bg_speed / 16) * this.value;\r\n        if (this.score_count >= 2) {\r\n            this.score_count = 0;\r\n            Global.gameInfo.score += 1;\r\n            this.scoreLabel.string = Global.gameInfo.score + 'm';\r\n        }\r\n\r\n        // 云移动\r\n        cloud.x -= this.bg_speed / 8;\r\n        if (cloud.x <= -cloud.width) cloud.x = _w;\r\n\r\n        // 山丘移动\r\n        mountain.x -= this.bg_speed / 3;\r\n        if (mountain.x <= -_w) mountain.x = 0;\r\n\r\n        // 树木移动\r\n        tree.x -= this.bg_speed / 2;\r\n        if (tree.x <= -_w) tree.x = 0\r\n\r\n        // gound移动\r\n        ground.x -= this.bg_speed / 1.5;\r\n        if (ground.x <= -_w) ground.x = 0;\r\n    },\r\n\r\n    // 重置下参数\r\n    restData(num = 0, bone = false) {\r\n        // 砸地板计数\r\n        this.floorNum = num;\r\n        // 背景移动速度\r\n        if (!bone) this.bg_speed = 16 * Global.gameInfo.startDash;\r\n        // 衰减值\r\n        this.value = 0.5;\r\n        if (bone) {\r\n            this.node.getChildByName('bone').getComponent(dragonBones.ArmatureDisplay).timeScale = 0.5;\r\n        } else {\r\n            this.node.getChildByName('bone').getComponent(dragonBones.ArmatureDisplay).timeScale = 1;\r\n        }\r\n    },\r\n\r\n    // 撞到地板\r\n    collisionFloor() {\r\n        if (window.wx) wx.vibrateShort();\r\n        this.floorNum += 5;\r\n        if (this.floorNum >= 25) {\r\n            // cc.log('游戏结束'); \r\n            Global.gameInfo.state = 'over';\r\n            this.node.y = this.node.height / 2;\r\n            this.bounce = 0;\r\n            this.node.getChildByName('bone').getComponent(dragonBones.ArmatureDisplay).playAnimation('rockStop', 1);\r\n            this.node.getChildByName('particle').getComponent(cc.ParticleSystem).stopSystem();\r\n            Global.game.gameOver();\r\n        } else {\r\n            this.bounce = 25 - this.floorNum;\r\n        }\r\n\r\n        this.bg_speed =  this.bg_speed / 2;\r\n        \r\n        // cc.log('撞到地面', this.floorNum);\r\n\r\n        this.restData(this.floorNum, true);\r\n        cc.audioEngine.play(this.audioFloor, false);\r\n    },\r\n\r\n    // 撞到兽人\r\n    collisionOrc(node) {\r\n        if (Global.gameInfo.state == 'over' || this.value <= 1 || this.isBoard) return; \r\n        if (window.wx) wx.vibrateShort();\r\n        // console.log('衰减值=======>', this.value);\r\n        if (this.bounce < 20 && !this.isBoard) this.bounce = 20;       // 上升高度\r\n        \r\n        // 播放溅血粒子\r\n        Global.game.explode(node);\r\n        // 回收兽人\r\n        Global.game.orcPool.put(node);\r\n        \r\n        // 做难度判断是否生成兽人\r\n        if (Global.gameInfo.total - Global.gameInfo.level >= Global.gameInfo.countToatal) {\r\n            Global.game.creatOrc();\r\n        } else {\r\n            console.log('减少一个兽人============>');\r\n            Global.gameInfo.countToatal = Global.gameInfo.countToatal <= Global.gameInfo.minNumber ? Global.gameInfo.minNumber : Global.gameInfo.countToatal - 1;\r\n        }\r\n        \r\n        this.scheduleOnce(() => {\r\n            if (!this.isBoard) this.restData();\r\n        }, 0.01);\r\n        \r\n        cc.audioEngine.play(this.audioDeath, false);\r\n    },\r\n\r\n    // 撞到宝箱\r\n    collisionStorehouse(node) {\r\n        if (Global.gameInfo.state == 'over' || this.value <= 1) return; \r\n        if (window.wx) wx.vibrateShort();\r\n        if (this.bounce < 25) this.bounce = 25;       // 上升高度\r\n        node.destroy();\r\n\r\n        // 播放粒子\r\n        let boom = cc.instantiate(this.explodeGold);\r\n        boom.setPosition(node.x + 50, node.y + 50);\r\n        boom.parent = Global.game.map;\r\n\r\n        // 金币更新\r\n        let num = parseInt(50 * Math.random()) + 50;\r\n        this.moneyTipMove(num);\r\n\r\n        this.scheduleOnce(() => {\r\n            this.restData();\r\n        }, 0.01);\r\n        cc.audioEngine.play(this.audioBox, false);\r\n    },\r\n\r\n    // 撞到炸弹\r\n    collisionBomb(node) {\r\n        if (Global.gameInfo.state == 'over' || this.value <= 1) return; \r\n        Global.game.nodeShock();\r\n        this.bounce = 30;       // 上升高度\r\n        node.destroy();\r\n\r\n        // 播放粒子\r\n        let boom = cc.instantiate(this.explodeBoom);\r\n        boom.setPosition(node.x + 50, node.y + 50);\r\n        boom.parent = Global.game.map;\r\n\r\n        this.scheduleOnce(() => {\r\n            this.restData();\r\n        }, 0.01);\r\n        cc.audioEngine.play(this.audioBoom, false);\r\n    },\r\n\r\n    // 撞到木板\r\n    collisionBoard(node) {\r\n        if (Global.gameInfo.state == 'over' || this.value <= 1) return; \r\n        if (window.wx) wx.vibrateShort();\r\n        this.bounce = 15;       // 上升高度\r\n        this.floorNum = 10;\r\n        node.destroy();\r\n        this.isBoard = true; // 碰到木板\r\n        this.scheduleOnce(() => {\r\n            this.restData(this.floorNum);\r\n            this.isBoard = false;\r\n            console.log('floorNum', this.floorNum);\r\n        }, 0.01);\r\n        cc.audioEngine.play(this.audioBoard, false);\r\n    },\r\n\r\n    // 碰撞回调\r\n    onCollisionEnter(other, self) {\r\n        // console.log(other.node.name);\r\n        \r\n        switch (other.node.name) {\r\n            case 'floor':\r\n                this.collisionFloor();\r\n                break;\r\n            case 'orc':\r\n                this.collisionOrc(other.node);\r\n                break;\r\n            case 'storehouse':\r\n                this.collisionStorehouse(other.node);\r\n                break;\r\n            case 'bomb':\r\n                this.collisionBomb(other.node);\r\n                break;\r\n            case 'board':\r\n                this.collisionBoard(other.node);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        // 弹力值\r\n        this.bounce = 0;\r\n        this.restData();\r\n        // 分数计数（模拟距离）\r\n        this.score_count = 0;\r\n\r\n        this.moneyLabel.string = Global.userInfo.money;\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    update(dt) {\r\n        if (Global.gameInfo.state == 'running') {\r\n            // 背景移动\r\n            this.bgMove();\r\n\r\n            // 视觉缩放监听\r\n            this.viewScale();\r\n            \r\n            // 第一种\r\n            this.bounce -= 1 * this.value;\r\n            this.node.y += this.bounce;\r\n            // console.log(this.bounce * this.value);\r\n            \r\n            // 防止掉落\r\n            if (this.node.y < 0) this.node.y = this.node.width / 2 + 1;\r\n        }\r\n    },\r\n});\r\n"]}