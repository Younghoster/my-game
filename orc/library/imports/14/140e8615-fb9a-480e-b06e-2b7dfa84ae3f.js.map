{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Game/assets\\Script\\Game\\Game.js"],"names":["Global","require","cc","Class","extends","Component","properties","wrap","default","type","Node","ball","coverStart","map","orc","Prefab","storehouse","bomb","board","blood","coverOver","audioBgm","AudioClip","audioFail","pauseBtn","blaze","audioRevive","openRank","restData","director","loadScene","openShare","wx","shareAppMessage","title","shareInfo","imageUrl","url","nodeShock","window","vibrateLong","stopAllActions","seq","sequence","moveTo","runAction","blazeMove","fadeIn","fadeOut","callFunc","gameInfo","startDash","destroy","console","log","stateSwitch","pauseGame","resume","loader","loadRes","SpriteFrame","err","res","getComponent","Sprite","spriteFrame","pause","reviveGame","audioEngine","play","getChildByName","active","moveBy","dragonBones","ArmatureDisplay","playAnimation","ParticleSystem","resetSystem","balljs","bounce","state","playBgm","playMusic","revived","playAgain","startGame","countToatal","total","width","schedule","creatPropOrc","orcMoney","orcBoom","orcBoard","node","find","gameOver","saveData","repeatForever","scaleTo","stopMusic","creatBloodPool","bloodPool","NodePool","i","instantiate","put","explode","_x","x","_y","y","height","size","get","setPosition","parent","scheduleOnce","creatOrcPool","orcPool","creatOrc","index","moveSpeed","crazy","typeNode","parseInt","Math","random","onLoad","game","managerCollis","getCollisionManager","enabled","start","on","value","abs"],"mappings":"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","file":"Game.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Game","sourcesContent":["const Global = require('Global');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // 整体容器（缩放用）\r\n        wrap: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        ball: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 开始遮罩\r\n        coverStart: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 地图容器\r\n        map: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 兽人\r\n        orc: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        // 宝箱\r\n        storehouse: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        // 炸弹\r\n        bomb: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        // 木板\r\n        board: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        // 血液粒子\r\n        blood: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        // 开始遮罩\r\n        coverOver: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // bgm\r\n        audioBgm: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        audioFail: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        pauseBtn: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 火焰闪屏\r\n        blaze: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 复活音效\r\n        audioRevive: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n    },\r\n    openRank() {\r\n        Global.restData();\r\n        cc.director.loadScene('Rank');\r\n    },\r\n    openShare() {\r\n        wx.shareAppMessage({\r\n            title: Global.shareInfo.title,\r\n            imageUrl: Global.shareInfo.url\r\n        });\r\n    },\r\n    // 屏幕震动\r\n    nodeShock() {\r\n        if (window.wx) wx.vibrateLong();\r\n        this.wrap.stopAllActions();\r\n        let seq = cc.sequence(\r\n            cc.moveTo(0.1, 0, 30), cc.moveTo(0.1, 0, -30),\r\n            cc.moveTo(0.1, 0, 30), cc.moveTo(0.1, 0, -30),\r\n            cc.moveTo(0.1, 0, 0));\r\n        this.wrap.runAction(seq);\r\n    },\r\n    // 火焰动画\r\n    blazeMove() {\r\n        if (window.wx) wx.vibrateLong();\r\n        let seq = cc.sequence(\r\n            cc.fadeIn(0.2), cc.fadeOut(0.2), cc.fadeIn(0.2), cc.fadeOut(0.2),\r\n            cc.fadeIn(0.2), cc.fadeOut(0.2), cc.fadeIn(0.2), cc.fadeOut(0.2),\r\n            cc.fadeIn(0.2), cc.fadeOut(0.2), cc.fadeIn(0.2), cc.fadeOut(0.2),\r\n            cc.fadeIn(0.2), cc.fadeOut(0.2), cc.fadeIn(0.2), cc.fadeOut(0.2),\r\n            cc.fadeIn(0.2), cc.fadeOut(0.2), cc.fadeIn(0.2), cc.fadeOut(0.2),\r\n            cc.fadeIn(0.2), cc.fadeOut(0.2), cc.fadeIn(0.2), cc.fadeOut(0.2),\r\n            cc.fadeIn(0.2), cc.fadeOut(0.2), cc.fadeIn(0.2), cc.fadeOut(0.2),\r\n            cc.fadeIn(0.2), cc.fadeOut(0.2), cc.fadeIn(0.2), cc.fadeOut(0.2),\r\n            cc.fadeIn(0.2), cc.fadeOut(0.2), cc.fadeIn(0.2), cc.fadeOut(0.2),\r\n            cc.fadeIn(0.2), cc.fadeOut(0.2), cc.fadeIn(0.2), cc.fadeOut(0.2),\r\n            cc.fadeIn(0.2), cc.fadeOut(0.2), cc.fadeIn(0.2), cc.fadeOut(0.2),\r\n            cc.fadeIn(0.2), cc.fadeOut(0.2), cc.fadeIn(0.2), cc.fadeOut(0.2), cc.callFunc(() => {\r\n                Global.gameInfo.startDash = 1;\r\n                this.blaze.destroy();\r\n                console.log('冲刺结束');\r\n            }));\r\n        this.blaze.runAction(seq);\r\n    },\r\n    // 暂停\r\n    stateSwitch() {\r\n        if (this.pauseGame) {\r\n            this.pauseGame = false;\r\n            cc.director.resume();\r\n            cc.loader.loadRes('pause', cc.SpriteFrame, (err, res) => {\r\n                this.pauseBtn.getComponent(cc.Sprite).spriteFrame = res;\r\n            });\r\n        } else {\r\n            this.pauseGame = true;\r\n            cc.director.pause();\r\n            cc.loader.loadRes('play', cc.SpriteFrame, (err, res) => {\r\n                this.pauseBtn.getComponent(cc.Sprite).spriteFrame = res;\r\n            });\r\n        }\r\n    },\r\n    // 复活游戏\r\n    reviveGame() {\r\n        cc.audioEngine.play(this.audioRevive, false);\r\n        this.coverOver.getChildByName('revive').destroy();\r\n        this.coverOver.active = false;\r\n        let seq = cc.sequence(cc.moveBy(0.5, 0, 350), cc.callFunc(() => {\r\n            this.ball.getChildByName('bone').getComponent(dragonBones.ArmatureDisplay).playAnimation('rock', 0);\r\n            this.ball.getChildByName('particle').getComponent(cc.ParticleSystem).resetSystem();\r\n            this.balljs.restData();\r\n            this.balljs.bounce = 0;\r\n            Global.gameInfo.state = 'running';\r\n            Global.playBgm = true;\r\n            cc.audioEngine.playMusic(this.audioBgm, true);\r\n            this.revived = true;\r\n        }));\r\n        this.ball.runAction(seq);\r\n    },\r\n    // 再来一次\r\n    playAgain() {\r\n        Global.restData();\r\n        cc.director.loadScene('Home');\r\n    },\r\n    // 开始\r\n    startGame() {\r\n        this.coverStart.destroy();\r\n        Global.gameInfo.countToatal = Global.gameInfo.total;\r\n        let seq = cc.sequence(cc.moveTo(1, this.wrap.width / 2, 500), cc.callFunc(() => {\r\n            Global.gameInfo.state = 'running';\r\n            // 金币箱兽人生成\r\n            this.schedule(() => this.creatPropOrc(this.storehouse), Global.gameInfo.orcMoney);\r\n            // 炸弹箱子兽人生成\r\n            this.schedule(() => this.creatPropOrc(this.bomb), Global.gameInfo.orcBoom);\r\n            // 木板兽人生成\r\n            this.schedule(() => this.creatPropOrc(this.board), Global.gameInfo.orcBoard);\r\n            if (Global.gameInfo.startDash > 1) {\r\n                this.blazeMove();\r\n            } else {\r\n                this.blaze.destroy();\r\n            }\r\n        }));\r\n        this.ball.runAction(seq);\r\n        // 针对全面屏手机做的地板拉长\r\n        if (this.node.width >= 1500) {\r\n            cc.find('move-box/floor', this.wrap).width = 3600;\r\n            console.log('针对全面屏手机做的地板拉长');   \r\n        }\r\n    },\r\n    // 游戏结束\r\n    gameOver() {\r\n        Global.saveData();\r\n        this.coverOver.active = true;\r\n        if (!this.revived) {\r\n            this.coverOver.getChildByName('revive').active = true;\r\n            let seq = cc.repeatForever(\r\n                cc.sequence(cc.scaleTo(0.3, 1.3, 1.2), cc.scaleTo(0.2, 1, 1))\r\n            );\r\n            this.coverOver.getChildByName('revive').runAction(seq);\r\n        }\r\n        Global.playBgm = false;\r\n        cc.audioEngine.stopMusic();\r\n        cc.audioEngine.play(this.audioFail, false);\r\n    },\r\n    // 血液粒子对象池\r\n    creatBloodPool() {\r\n        this.bloodPool = new cc.NodePool();\r\n        for (let i = 0; i < Global.gameInfo.total - 5; ++i) {\r\n            let blood = cc.instantiate(this.blood);\r\n            this.bloodPool.put(blood);\r\n        }\r\n    },\r\n    // 血浆粒子爆炸\r\n    explode(node) {\r\n        let blood = null,\r\n            _x = node.x + node.width / 2,\r\n            _y = node.y + node.height / 2;\r\n        if (this.bloodPool.size() > 0) {\r\n            blood = this.bloodPool.get();\r\n        } else {\r\n            cc.log('重新创建粒子');\r\n            blood = cc.instantiate(this.blood);\r\n        }\r\n        blood.setPosition(_x, _y);\r\n        blood.parent = this.map;\r\n        blood.getComponent(cc.ParticleSystem).resetSystem();\r\n\r\n        // 0.5秒后回收\r\n        this.scheduleOnce(() => this.bloodPool.put(blood), 0.5);\r\n    },\r\n    // 兽人对象池\r\n    creatOrcPool() {\r\n        this.orcPool = new cc.NodePool();\r\n        for (let i = 0; i < Global.gameInfo.total; ++i) {\r\n            let orc = cc.instantiate(this.orc);\r\n            this.orcPool.put(orc);\r\n        }\r\n    },\r\n    // 制造兽人\r\n    creatOrc(index = null) {\r\n        let orc = null;\r\n        if (this.orcPool.size() > 0) {\r\n            orc = this.orcPool.get();\r\n        } else {\r\n            console.log('对象池不够用，重新创建');\r\n            orc = cc.instantiate(this.orc);\r\n        }\r\n        orc.y = 0;\r\n        orc.x = -orc.width;\r\n        orc.parent = this.map;\r\n        // 赋值（兽人速度）\r\n        if (index != null) {\r\n            console.log('兽人速度赋值');\r\n            orc.moveSpeed = 2 + (0.8 * Global.gameInfo.crazy) * index;\r\n        }\r\n    },\r\n    // 制造道具兽人\r\n    creatPropOrc(typeNode) {\r\n        let orc = cc.instantiate(typeNode);\r\n        orc.y = 0;\r\n        orc.x = -orc.width;\r\n        orc.moveSpeed = parseInt(5 * Math.random()) + 5 * Global.gameInfo.crazy;\r\n        orc.parent = this.map;\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        Global.game = this;\r\n\r\n        //碰撞系统\r\n        const managerCollis = cc.director.getCollisionManager();\r\n        managerCollis.enabled = true;\r\n        // 开启碰撞系统的调试线框绘制\r\n        // managerCollis.enabledDebugDraw = true;\r\n        // managerCollis.enabledDrawBoundingBox = true;\r\n\r\n        // ball 脚本\r\n        this.balljs = this.ball.getComponent('Ball');\r\n\r\n        // 使用兽人对象池\r\n        this.creatOrcPool();\r\n\r\n        // 产出兽人\r\n        for (let i = Global.gameInfo.total; i > 0; i--) {\r\n            this.scheduleOnce(() => {\r\n                this.creatOrc(i);\r\n                // console.log(i);\r\n            }, 0.2);\r\n        }\r\n\r\n        // 使用粒子对象池\r\n        this.creatBloodPool();\r\n\r\n    },\r\n\r\n    start() {\r\n        this.node.on('touchstart', () => {\r\n            if (Global.gameInfo.state == 'over' || this.pauseGame) return;\r\n\r\n            this.balljs.value = 3;\r\n            // this.balljs.bg_speed *= 2;\r\n            // if (this.balljs.bounce > 0) \r\n            this.balljs.bounce = -Math.abs(this.balljs.bounce);\r\n\r\n        }, this);\r\n    },\r\n\r\n    // update (dt) {},\r\n});"]}