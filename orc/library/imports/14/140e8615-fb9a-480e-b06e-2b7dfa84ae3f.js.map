{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Game/assets\\Script\\Game\\Game.js"],"names":["Global","require","cc","Class","extends","Component","properties","wrap","default","type","Node","ball","coverStart","map","orc","Prefab","storehouse","bomb","board","coverOver","audioBgm","AudioClip","audioFail","pauseBtn","stateSwitch","pauseGame","director","resume","loader","loadRes","SpriteFrame","err","res","getComponent","Sprite","spriteFrame","pause","playAgain","loadScene","startGame","destroy","seq","sequence","moveTo","width","callFunc","gameInfo","state","schedule","creatStorehouse","creatBomb","creatBoard","runAction","gameOver","active","audioEngine","stopMusic","play","creatOrc","instantiate","y","x","parent","onLoad","game","managerCollis","getCollisionManager","enabled","balljs","i","playMusic","start","node","on","value","bounce","Math","abs"],"mappings":"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","file":"Game.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Game","sourcesContent":["const Global = require('Global');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // 整体容器（缩放用）\r\n        wrap: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        ball: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 开始遮罩\r\n        coverStart: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 地图容器\r\n        map: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 兽人\r\n        orc: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        // 宝箱\r\n        storehouse: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        // 炸弹\r\n        bomb: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        // 木板\r\n        board: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        // 开始遮罩\r\n        coverOver: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // bgm\r\n        audioBgm: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        audioFail: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        pauseBtn: {\r\n            default: null,\r\n            type: cc.Node\r\n        }\r\n    },\r\n    // 暂停\r\n    stateSwitch() {\r\n        if (this.pauseGame) {\r\n            this.pauseGame = false;\r\n            cc.director.resume();\r\n            cc.loader.loadRes('pause', cc.SpriteFrame, (err, res) => {\r\n                this.pauseBtn.getComponent(cc.Sprite).spriteFrame = res;\r\n            });\r\n        } else {\r\n            this.pauseGame = true;\r\n            cc.director.pause();\r\n            cc.loader.loadRes('play', cc.SpriteFrame, (err, res) => {\r\n                this.pauseBtn.getComponent(cc.Sprite).spriteFrame = res;\r\n            });\r\n        }\r\n    },\r\n    // 再来一次\r\n    playAgain() {\r\n        cc.director.loadScene('Game');\r\n    },\r\n    // 开始\r\n    startGame() {\r\n        this.coverStart.destroy();\r\n        \r\n        let seq = cc.sequence(cc.moveTo(1, this.wrap.width / 2, 500), cc.callFunc(() => {\r\n            Global.gameInfo.state = 'running';\r\n            this.schedule(() => {\r\n                this.creatStorehouse();\r\n            }, 5);\r\n\r\n            this.schedule(() => {\r\n                this.creatBomb();\r\n            }, 10);\r\n\r\n            this.schedule(() => {\r\n                this.creatBoard();\r\n            }, 8);\r\n        }));\r\n        // seq.easing(cc.easeOut(3));\r\n        this.ball.runAction(seq);\r\n    },\r\n    // 游戏结束\r\n    gameOver() {\r\n        this.coverOver.active = true;\r\n        \r\n        cc.audioEngine.stopMusic();\r\n        cc.audioEngine.play(this.audioFail, false);\r\n    },\r\n    // 制造兽人\r\n    creatOrc() {\r\n        let orc = cc.instantiate(this.orc);\r\n        orc.y = 0;\r\n        orc.x = -orc.width;\r\n        orc.parent = this.map;\r\n    },\r\n    // 制造宝箱\r\n    creatStorehouse() {\r\n        let orc = cc.instantiate(this.storehouse);\r\n        orc.y = 0;\r\n        orc.x = -orc.width;\r\n        orc.parent = this.map;\r\n    },\r\n    // 制造炸弹\r\n    creatBomb() {\r\n        let orc = cc.instantiate(this.bomb);\r\n        orc.y = 0;\r\n        orc.x = -orc.width;\r\n        orc.parent = this.map;\r\n    },\r\n    // 制造木板\r\n    creatBoard() {\r\n        let orc = cc.instantiate(this.board);\r\n        orc.y = 0;\r\n        orc.x = -orc.width;\r\n        orc.parent = this.map;\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        Global.game = this;\r\n        //碰撞系统（不需要）\r\n        const managerCollis = cc.director.getCollisionManager();\r\n        managerCollis.enabled = true; \r\n        // 开启碰撞系统的调试线框绘制\r\n        // managerCollis.enabledDebugDraw = true;\r\n        // managerCollis.enabledDrawBoundingBox = true;\r\n\r\n        // ball 脚本\r\n        this.balljs = this.ball.getComponent('Ball');\r\n\r\n        // 产出兽人\r\n        for (let i = 0; i < 20; i++) this.creatOrc();\r\n        \r\n        cc.audioEngine.playMusic(this.audioBgm, true);\r\n    },\r\n\r\n    start () {\r\n        this.node.on('touchstart', () => {\r\n            if (Global.gameInfo.state == 'over' || this.pauseGame) return;\r\n            // 第一种\r\n            this.balljs.value = 3;\r\n            // this.balljs.bg_speed *= 2;\r\n            // if (this.balljs.bounce > 0) \r\n            this.balljs.bounce = -Math.abs(this.balljs.bounce);\r\n            \r\n        }, this);\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}