{"version":3,"sources":["Home.js"],"names":["Global","require","cc","Class","extends","Component","properties","openGame","director","loadScene","openRank","onLoad","preloadScene","console","log","start","window","wx","getUserInfo","success","res","fail","_w","getSystemInfoSync","windowWidth","_h","windowHeight","warn","loginBtn","createUserInfoButton","type","text","style","left","top","width","height","lineHeight","backgroundColor","color","textAlign","fontSize","borderRadius","onTap","errMsg","destroy","showShareMenu","onShareAppMessage","title","shareInfo","imageUrl","url"],"mappings":";;;;;;AAAA,IAAMA,SAASC,QAAQ,QAAR,CAAf;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;AAMLC,YANK,sBAMM;AACPL,WAAGM,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH,KARI;AASLC,YATK,sBASO;AACRR,WAAGM,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH,KAXI;;AAYL;;AAEAE,UAdK,oBAcK;AACNT,WAAGM,QAAH,CAAYI,YAAZ,CAAyB,MAAzB,EAAiC;AAAA,mBAAMC,QAAQC,GAAR,CAAY,WAAZ,CAAN;AAAA,SAAjC;AACH,KAhBI;AAkBLC,SAlBK,mBAkBI;AACL,YAAIC,OAAOC,EAAX,EAAe;AACX;AACAA,eAAGC,WAAH,CAAe;AACXC,uBADW,mBACHC,GADG,EACE;AACTP,4BAAQC,GAAR,CAAY,aAAZ,EAA2BM,GAA3B;AACH,iBAHU;AAIXC,oBAJW,kBAIJ;AACH,wBAAIC,KAAKL,GAAGM,iBAAH,GAAuBC,WAAhC;AAAA,wBACIC,KAAKR,GAAGM,iBAAH,GAAuBG,YADhC;AAEAb,4BAAQc,IAAR,CAAa,YAAb;AACA;AACA,wBAAIC,WAAWX,GAAGY,oBAAH,CAAwB;AACnCC,8BAAM,MAD6B;AAEnCC,8BAAM,EAF6B;AAGnCC,+BAAO;AACHC,kCAAM,CADH;AAEHC,iCAAK,CAFF;AAGHC,mCAAOb,EAHJ;AAIHc,oCAAQX,EAJL;AAKHY,wCAAYZ,EALT;AAMHa,6CAAiB,kBANd;AAOHC,mCAAO,kBAPJ;AAQHC,uCAAW,QARR;AASHC,sCAAU,EATP;AAUHC,0CAAc;AAVX;AAH4B,qBAAxB,CAAf;AAgBA;AACAd,6BAASe,KAAT,CAAe,eAAO;AAClB9B,gCAAQC,GAAR,CAAY,SAAZ,EAAuBM,GAAvB;AACA,4BAAIA,IAAIwB,MAAJ,IAAc,gBAAlB,EAAoC;AACpChB,iCAASiB,OAAT;AACH,qBAJD;AAKH;AA/BU,aAAf;AAiCA;AACA5B,eAAG6B,aAAH;AACA;AACA7B,eAAG8B,iBAAH,CAAqB,eAAO;AACxB,uBAAO;AACHC,2BAAOhD,OAAOiD,SAAP,CAAiBD,KADrB;AAEHE,8BAAUlD,OAAOiD,SAAP,CAAiBE;AAFxB,iBAAP;AAIH,aALD;AAMH;AACJ;AAhEI;;AAkEL;AAlEJ","file":"Home.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["const Global = require('Global');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        \r\n    },\r\n    openGame() {\r\n        cc.director.loadScene('Game');\r\n    },\r\n    openRank () {\r\n        cc.director.loadScene('Rank');\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        cc.director.preloadScene('Game', () => console.log('预加载游戏场景成功'));\r\n    },\r\n\r\n    start () {\r\n        if (window.wx) {\r\n            // 检测用户是否授权过\r\n            wx.getUserInfo({\r\n                success(res) {\r\n                    console.log('用户授权信息====>', res);\r\n                },\r\n                fail() {\r\n                    let _w = wx.getSystemInfoSync().windowWidth, \r\n                        _h = wx.getSystemInfoSync().windowHeight;\r\n                    console.warn('创建获取用户信息按钮');\r\n                    // 创建获取用户信息按钮\r\n                    let loginBtn = wx.createUserInfoButton({\r\n                        type: 'text',\r\n                        text: '',\r\n                        style: {\r\n                            left: 0,\r\n                            top: 0,\r\n                            width: _w,\r\n                            height: _h,\r\n                            lineHeight: _h,\r\n                            backgroundColor: 'rgba(0, 0, 0, 0)',\r\n                            color: 'rgba(0, 0, 0, 0)',\r\n                            textAlign: 'center',\r\n                            fontSize: 16,\r\n                            borderRadius: 4\r\n                        }\r\n                    });\r\n                    // 监听点击事件\r\n                    loginBtn.onTap(res => {\r\n                        console.log('用户授权数据：', res);\r\n                        if (res.errMsg != 'getUserInfo:ok') return;\r\n                        loginBtn.destroy();\r\n                    });\r\n                }\r\n            });\r\n            // 显示分享按钮\r\n            wx.showShareMenu();\r\n            // 设置转发分内容\r\n            wx.onShareAppMessage(res => {\r\n                return {\r\n                    title: Global.shareInfo.title,\r\n                    imageUrl: Global.shareInfo.url,\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}