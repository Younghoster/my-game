__require=function e(o,t,n){function c(a,s){if(!t[a]){if(!o[a]){var r=a.split("/");if(r=r[r.length-1],!o[r]){var l="function"==typeof __require&&__require;if(!s&&l)return l(r,!0);if(i)return i(r,!0);throw new Error("Cannot find module '"+a+"'")}}var u=t[a]={exports:{}};o[a][0].call(u.exports,function(e){return c(o[a][1][e]||e)},u,u.exports,e,o,t,n)}return t[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)c(n[a]);return c}({Ball:[function(e,o,t){"use strict";cc._RF.push(o,"cb8acBJ2t5H26YyJTwSNrq5","Ball");var n=e("Global"),c=[{mountain:"#7D2C1B",tree:"#491D12",floor:"#75280C",ground:"#3D1805"},{mountain:"#81b68c",tree:"#65977a",floor:"#e5c282",ground:"#2b5748"}];cc.Class({extends:cc.Component,properties:{moveBox:{default:null,type:cc.Node},bg2:{default:null,type:cc.Node},audioFloor:{default:null,type:cc.AudioClip},audioDeath:{default:null,type:cc.AudioClip},audioBox:{default:null,type:cc.AudioClip},audioBoom:{default:null,type:cc.AudioClip},audioBoard:{default:null,type:cc.AudioClip},scoreLabel:{default:null,type:cc.Label},moneyLabel:{default:null,type:cc.Label}},viewScale:function(){this.node.y<500||(n.game.wrap.scale=510/this.node.y)},bgMove:function(){var e=this.moveBox.width,o=this.moveBox.getChildByName("sun"),t=this.moveBox.getChildByName("tree"),i=this.moveBox.getChildByName("mountain"),a=this.moveBox.getChildByName("floor"),s=this.moveBox.getChildByName("ground"),r=this.moveBox.getChildByName("cloud");o.x-=this.bg_speed/8,o.x<=-o.width&&(o.x=e,this.bg_count+=1,1==this.bg_count&&(this.bg_count=0,255==o.opacity?(this.bg2.runAction(cc.fadeIn(.3)),o.runAction(cc.fadeOut(.3)),r.runAction(cc.fadeIn(.3)),i.color=cc.hexToColor(c[1].mountain),t.color=cc.hexToColor(c[1].tree),a.color=cc.hexToColor(c[1].floor),s.color=cc.hexToColor(c[1].ground)):(this.bg2.runAction(cc.fadeOut(.3)),o.runAction(cc.fadeIn(.3)),r.runAction(cc.fadeOut(.3)),i.color=cc.hexToColor(c[0].mountain),t.color=cc.hexToColor(c[0].tree),a.color=cc.hexToColor(c[0].floor),s.color=cc.hexToColor(c[0].ground)))),n.gameInfo.score+=1*this.value*2,this.scoreLabel.string=n.gameInfo.score+"m",r.x-=this.bg_speed/8,r.x<=-r.width&&(r.x=e),i.x-=this.bg_speed/3,i.x<=-e&&(i.x=0),t.x-=this.bg_speed/2,t.x<=-e&&(t.x=0),s.x-=this.bg_speed/1.5,s.x<=-e&&(s.x=0)},restData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.floorNum=e,o||(this.bg_speed=16),this.value=.5,this.node.getChildByName("bone").getComponent(dragonBones.ArmatureDisplay).timeScale=o?.5:1},collisionFloor:function(){this.floorNum+=5,this.floorNum>=25?(n.gameInfo.state="over",this.node.y=this.node.height/2,this.bounce=0,cc.log("\u6e38\u620f\u7ed3\u675f"),this.node.getChildByName("bone").getComponent(dragonBones.ArmatureDisplay).playAnimation("rockStop",1),this.node.getChildByName("particle").getComponent(cc.ParticleSystem).stopSystem(),n.game.gameOver()):this.bounce=25-this.floorNum,this.bg_speed=this.bg_speed/2,cc.log("\u649e\u5230\u5730\u9762",this.floorNum),this.restData(this.floorNum,!0),cc.audioEngine.play(this.audioFloor,!1)},collisionOrc:function(e){var o=this;"over"==n.gameInfo.state||this.value<=1||this.isBoard||(this.bounce<20&&!this.isBoard&&(this.bounce=20),this.node.getChildByName("blood").getComponent(cc.ParticleSystem).resetSystem(),e.destroy(),n.game.creatOrc(),this.scheduleOnce(function(){o.isBoard||o.restData()},.01),cc.audioEngine.play(this.audioDeath,!1))},collisionStorehouse:function(e){var o=this;if(!("over"==n.gameInfo.state||this.value<=1)){this.bounce<25&&(this.bounce=25),e.destroy();var t=parseInt(10*Math.random())+10;n.gameInfo.money+=t,this.moneyLabel.string=n.gameInfo.money,this.scheduleOnce(function(){o.restData()},.01),cc.audioEngine.play(this.audioBox,!1)}},collisionBomb:function(e){var o=this;"over"==n.gameInfo.state||this.value<=1||(this.bounce=30,e.destroy(),this.scheduleOnce(function(){o.restData()},.01),cc.audioEngine.play(this.audioBoom,!1))},collisionBoard:function(e){var o=this;"over"==n.gameInfo.state||this.value<=1||(this.bounce=15,this.floorNum=10,e.destroy(),this.isBoard=!0,this.scheduleOnce(function(){o.restData(o.floorNum),o.isBoard=!1,console.log("floorNum",o.floorNum)},.01),cc.audioEngine.play(this.audioBoard,!1))},onCollisionEnter:function(e,o){switch(e.node.name){case"floor":this.collisionFloor();break;case"orc":this.collisionOrc(e.node);break;case"storehouse":this.collisionStorehouse(e.node);break;case"bomb":this.collisionBomb(e.node);break;case"board":this.collisionBoard(e.node)}},onLoad:function(){this.bounce=0,this.restData(),this.bg_count=0},start:function(){},update:function(e){"running"==n.gameInfo.state&&(this.bgMove(),this.viewScale(),this.bounce-=1*this.value,this.node.y+=this.bounce,this.node.y<0&&(this.node.y=this.node.width/2+1))}}),cc._RF.pop()},{Global:"Global"}],Camera:[function(e,o,t){"use strict";cc._RF.push(o,"ff4bcMPMEpOrKR8PyNvcvMB","Camera");e("Global");cc.Class({extends:cc.Component,properties:{target:{default:null,type:cc.Node}},update:function(e){this.target.x>=0&&this.node.x<this.target.x&&(this.node.x=this.target.x)}}),cc._RF.pop()},{Global:"Global"}],Game:[function(e,o,t){"use strict";cc._RF.push(o,"140e8YV+5pIDrBuK336hK4/","Game");var n=e("Global");cc.Class({extends:cc.Component,properties:{wrap:{default:null,type:cc.Node},ball:{default:null,type:cc.Node},coverStart:{default:null,type:cc.Node},map:{default:null,type:cc.Node},orc:{default:null,type:cc.Prefab},storehouse:{default:null,type:cc.Prefab},bomb:{default:null,type:cc.Prefab},board:{default:null,type:cc.Prefab},coverOver:{default:null,type:cc.Node},audioBgm:{default:null,type:cc.AudioClip},audioFail:{default:null,type:cc.AudioClip},pauseBtn:{default:null,type:cc.Node}},stateSwitch:function(){var e=this;this.pauseGame?(this.pauseGame=!1,cc.director.resume(),cc.loader.loadRes("pause",cc.SpriteFrame,function(o,t){e.pauseBtn.getComponent(cc.Sprite).spriteFrame=t})):(this.pauseGame=!0,cc.director.pause(),cc.loader.loadRes("play",cc.SpriteFrame,function(o,t){e.pauseBtn.getComponent(cc.Sprite).spriteFrame=t}))},playAgain:function(){cc.director.loadScene("Game"),n.gameInfo.score=0,n.gameInfo.reviveScore=0},startGame:function(){var e=this;this.coverStart.destroy();var o=cc.sequence(cc.moveTo(1,this.wrap.width/2,500),cc.callFunc(function(){n.gameInfo.state="running",e.schedule(function(){e.creatStorehouse()},5),e.schedule(function(){e.creatBomb()},10),e.schedule(function(){e.creatBoard()},8)}));this.ball.runAction(o)},gameOver:function(){this.coverOver.active=!0,cc.audioEngine.stopMusic(),cc.audioEngine.play(this.audioFail,!1)},creatOrc:function(){var e=cc.instantiate(this.orc);e.y=0,e.x=-e.width,e.parent=this.map},creatStorehouse:function(){var e=cc.instantiate(this.storehouse);e.y=0,e.x=-e.width,e.parent=this.map},creatBomb:function(){var e=cc.instantiate(this.bomb);e.y=0,e.x=-e.width,e.parent=this.map},creatBoard:function(){var e=cc.instantiate(this.board);e.y=0,e.x=-e.width,e.parent=this.map},onLoad:function(){n.game=this,cc.director.getCollisionManager().enabled=!0,this.balljs=this.ball.getComponent("Ball");for(var e=0;e<20;e++)this.creatOrc();cc.audioEngine.playMusic(this.audioBgm,!0)},start:function(){var e=this;this.node.on("touchstart",function(){"over"==n.gameInfo.state||e.pauseGame||(e.balljs.value=3,e.balljs.bounce=-Math.abs(e.balljs.bounce))},this)}}),cc._RF.pop()},{Global:"Global"}],Global:[function(e,o,t){"use strict";cc._RF.push(o,"ccbdbz4xYJOtJdax0OemaT/","Global"),o.exports={game:null,gameInfo:{state:"over",score:0,reviveScore:0,money:0},shareInfo:{title:"",url:""}},cc._RF.pop()},{}],Home:[function(e,o,t){"use strict";cc._RF.push(o,"f149fTAsvFGpqRl39CPTvqE","Home");var n=e("Global");cc.Class({extends:cc.Component,properties:{},openGame:function(){cc.director.loadScene("Game")},openRank:function(){cc.director.loadScene("Rank")},onLoad:function(){cc.director.preloadScene("Game",function(){return console.log("\u9884\u52a0\u8f7d\u6e38\u620f\u573a\u666f\u6210\u529f")})},start:function(){window.wx&&(wx.getUserInfo({success:function(e){console.log("\u7528\u6237\u6388\u6743\u4fe1\u606f====>",e)},fail:function(){var e=wx.getSystemInfoSync().windowWidth,o=wx.getSystemInfoSync().windowHeight;console.warn("\u521b\u5efa\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6309\u94ae");var t=wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:e,height:o,lineHeight:o,backgroundColor:"rgba(0, 0, 0, 0)",color:"rgba(0, 0, 0, 0)",textAlign:"center",fontSize:16,borderRadius:4}});t.onTap(function(e){console.log("\u7528\u6237\u6388\u6743\u6570\u636e\uff1a",e),"getUserInfo:ok"==e.errMsg&&t.destroy()})}}),wx.showShareMenu(),wx.onShareAppMessage(function(e){return{title:n.shareInfo.title,imageUrl:n.shareInfo.url}}))}}),cc._RF.pop()},{Global:"Global"}],Logo:[function(e,o,t){"use strict";cc._RF.push(o,"b3677chzw5JNYW1lOPAusuh","Logo"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.preloadScene("Home",function(){return console.log("\u9884\u52a0\u8f7d\u6e38\u620f\u573a\u666f\u6210\u529f")}),this.scheduleOnce(function(){cc.director.loadScene("Home")},2)},start:function(){}}),cc._RF.pop()},{}],Orc:[function(e,o,t){"use strict";cc._RF.push(o,"97443cTQwVMNq2iqPKKQ/56","Orc"),cc.Class({extends:cc.Component,properties:{},nodeMove:function(){"orc"==this.node.name?this.node.x>this.node.parent.width&&(this.node.x=-this.node.width):this.node.x>this.node.parent.width&&this.node.destroy()},onLoad:function(){this.move=parseInt(5*Math.random())+4},start:function(){},update:function(e){this.node.x+=this.move,this.nodeMove()}}),cc._RF.pop()},{}],Rank:[function(e,o,t){"use strict";cc._RF.push(o,"10919IcMlRJCIJnVTKIFzRH","Rank"),cc.Class({extends:cc.Component,properties:{subBox:{default:null,type:cc.Sprite}},openShare:function(){wx.shareAppMessage({title:Global.shareInfo.title,imageUrl:Global.shareInfo.url})},backGame:function(){window.wx&&wx.postMessage({action:"hide"}),cc.director.loadScene("Game")},backHome:function(){cc.director.loadScene("Home")},onLoad:function(){window.wx&&wx.postMessage({action:"show"})},start:function(){window.wx&&(this.sub=new cc.Texture2D,wx.showShareMenu(),wx.onShareAppMessage(function(e){return{title:Global.shareInfo.title,imageUrl:Global.shareInfo.url}}))},updaetSubDomainCanvas:function(){if(this.sub){var e=wx.getOpenDataContext().canvas;this.sub.initWithElement(e),this.sub.handleLoadedTexture(),this.subBox.spriteFrame=new cc.SpriteFrame(this.sub)}},update:function(e){this.updaetSubDomainCanvas()}}),cc._RF.pop()},{}]},{},["Ball","Camera","Game","Orc","Global","Home","Logo","Rank"]);